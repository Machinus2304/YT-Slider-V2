<div id="youtube-slider-container" style="width: 100%; height: 100%; position: relative; overflow: hidden;">
  <div id="youtube-slider" style="width: 100%; height: 100%; position: relative; transition: transform 1s ease;">
    <iframe id="youtube-player-1" class="youtube-player" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <iframe id="youtube-player-2" class="youtube-player" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <iframe id="youtube-player-3" class="youtube-player" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>
  <button id="prev-button" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); z-index: 10;">&#8249;</button>
  <button id="next-button" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); z-index: 10;">&#8250;</button>
</div>

<style>
  #youtube-slider-container, #youtube-slider, .youtube-player {
    width: 100%;
    height: 100%;
  }
  .youtube-player {
    position: absolute;
    top: 0;
    left: 0;
  }
  #prev-button, #next-button {
    background: rgba(0,0,0,0.5);
    color: white;
    border: none;
    font-size: 24px;
    padding: 10px;
    cursor: pointer;
  }
</style>

<script>
const videos = [
  'https://www.youtube.com/embed/XZvmDETfLzE',
  'https://www.youtube.com/embed/hLjTItsAH3I',
  'https://www.youtube.com/embed/bAVpyzJwHZs'
];

let currentVideoIndex = 0;
let intervalId;
const slider = document.getElementById('youtube-slider');
const players = Array.from(document.getElementsByClassName('youtube-player'));

// Funktion zum Laden der Videos in die IFrames
function loadVideos() {
  for (let i = 0; i < players.length; i++) {
    const index = (currentVideoIndex + i) % videos.length;
    players[i].src = videos[index] + '?enablejsapi=1&autoplay=0';
  }
}

// Funktion zum Bewegen des Sliders
function slide(direction) {
  currentVideoIndex = (currentVideoIndex + direction + videos.length) % videos.length;
  slider.style.transform = `translateX(${-currentVideoIndex * 100}%)`;
  setTimeout(loadVideos, 1000); // Load new videos after animation
}

// Funktion zum Starten des Sliders
function startSlider() {
  loadVideos();
  intervalId = setInterval(() => slide(1), 15000);
}

// Funktion zum Stoppen des Sliders
function stopSlider() {
  clearInterval(intervalId);
}

// Event Listener für die Navigations-Buttons
document.getElementById('prev-button').addEventListener('click', () => {
  stopSlider();
  slide(-1);
  intervalId = setInterval(() => slide(1), 15000);
});

document.getElementById('next-button').addEventListener('click', () => {
  stopSlider();
  slide(1);
  intervalId = setInterval(() => slide(1), 15000);
});

// Event Listener für das Abspielen der Videos
function onYouTubeIframeAPIReady() {
  players.forEach(player => {
    const playerInstance = new YT.Player(player.id, {
      events: {
        'onStateChange': function(event) {
          if (event.data === YT.PlayerState.PLAYING) {
            stopSlider();
          }
        }
      }
    });
  });
}

// Laden der YouTube IFrame API
const tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
const firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

startSlider();
</script>
