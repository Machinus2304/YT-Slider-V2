<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Slider</title>
  <style>
    #youtube-slider-container {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
    }
    #youtube-slider {
      display: flex; /* Flexbox für Slider */
      transition: transform 1s ease;
      width: 100%; /* Setze die Breite auf die Anzahl der Videos multipliziert */
      height: 100%;
    }
    .youtube-player {
      flex: 1; /* Stelle sicher, dass jedes Video gleichmäßig verteilt ist */
      height: 100%;
    }
    #prev-button, #next-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      font-size: 24px;
      padding: 10px;
      cursor: pointer;
    }
    #prev-button { left: 10px; }
    #next-button { right: 10px; }
  </style>
</head>
<body>

<div id="youtube-slider-container">
  <div id="youtube-slider">
    <!-- Die IFrames werden dynamisch geladen -->
  </div>
  <button id="prev-button">&#8249;</button>
  <button id="next-button">&#8250;</button>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
const videos = [
  'https://www.youtube.com/embed/XZvmDETfLzE',
  'https://www.youtube.com/embed/hLjTItsAH3I',
  'https://www.youtube.com/embed/bAVpyzJwHZs'
];

let currentVideoIndex = 0;
let intervalId;

const slider = document.getElementById('youtube-slider');

// Funktion zum Erstellen und Laden der IFrames
function loadVideos() {
  slider.innerHTML = ''; // Leere den Slider vor dem Neuladen
  videos.forEach((videoUrl, index) => {
    const iframe = document.createElement('iframe');
    iframe.className = 'youtube-player';
    iframe.src = videoUrl + '?enablejsapi=1&autoplay=0';
    iframe.frameBorder = '0';
    iframe.allow = 'autoplay; encrypted-media';
    iframe.allowFullscreen = true;
    slider.appendChild(iframe);
  });
  updateSliderPosition();
}

// Funktion zum Aktualisieren der Slider-Position
function updateSliderPosition() {
  slider.style.transform = `translateX(${-currentVideoIndex * 100}%)`;
}

// Funktion zum Bewegen des Sliders
function slide(direction) {
  currentVideoIndex = (currentVideoIndex + direction + videos.length) % videos.length;
  updateSliderPosition();
}

// Funktion zum Starten des Sliders
function startSlider() {
  loadVideos();
  intervalId = setInterval(() => slide(1), 15000);
}

// Funktion zum Stoppen des Sliders
function stopSlider() {
  clearInterval(intervalId);
}

// Event Listener für die Navigations-Buttons
document.getElementById('prev-button').addEventListener('click', () => {
  stopSlider();
  slide(-1);
  intervalId = setInterval(() => slide(1), 15000);
});

document.getElementById('next-button').addEventListener('click', () => {
  stopSlider();
  slide(1);
  intervalId = setInterval(() => slide(1), 15000);
});

// Funktion zum Stoppen des Sliders, wenn ein Video abgespielt wird
function onYouTubeIframeAPIReady() {
  Array.from(document.getElementsByClassName('youtube-player')).forEach(player => {
    const playerInstance = new YT.Player(player, {
      events: {
        'onStateChange': function(event) {
          if (event.data === YT.PlayerState.PLAYING) {
            stopSlider();
          }
        }
      }
    });
  });
}

startSlider();
</script>
</body>
</html>
